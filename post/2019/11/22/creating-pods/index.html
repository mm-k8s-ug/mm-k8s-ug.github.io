<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" Creating Pods &middot;  Myanmar Kubernetes User Group" />
  	<meta property="og:site_name" content="Myanmar Kubernetes User Group" />
  	<meta property="og:url" content="https://mm-k8s-ug.github.io/post/2019/11/22/creating-pods/" />
    
    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2019-11-22T00:00:00Z" />

    
    

  <title>
     Creating Pods &middot;  Myanmar Kubernetes User Group
  </title>

    <meta name="description" content="this is my description" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://mm-k8s-ug.github.io/images/favicon.ico">
	  <link rel="apple-touch-icon" href="https://mm-k8s-ug.github.io/images/apple-touch-icon.png" />
    
    <link rel="stylesheet" type="text/css" href="https://mm-k8s-ug.github.io/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="https://mm-k8s-ug.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Myanmar Kubernetes User Group" />
      
      
    
    <meta name="generator" content="Hugo 0.62.0-DEV" />

    <link rel="canonical" href="https://mm-k8s-ug.github.io/post/2019/11/22/creating-pods/" />

     
</head>
<body class="nav-closed">
<div id="particles-js"></div>
  


 <div class="site-wrapper">



<header class="main-header " style="background-image: url(https://mm-k8s-ug.github.io/image/user.png)">

    <nav class="main-nav overlay clearfix">
        
        
    </nav>
<div class="vertical">
        <div class="main-header-content inner">
            <h1 class="page-title">
              <a class="btn-bootstrap-2" href="#content">Myanmar Kubernetes User Group</a>
          </h1>
          <h2 class="page-description">this is my description</h2>
        </div>
</div>
    <a class="scroll-down icon-arrow-left" href="#content"><span class="hidden">Scroll Down</span></a>
</header>

  <main id="content" class="content" role="main">


  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Creating Pods</h1>
        <section class="post-meta">
        
	<time class="post-date" datetime="2019-11-22">
            2019-11-22
          </time>
        
         
        </section>
    </header>

    <section class="post-content">
      <p><img src="https://raw.githubusercontent.com/mm-k8s-ug/mm-k8s-ug.github.io/master/images/pods3.svg" alt="pods"></p>
<!-- raw HTML omitted -->
<p>Pods နဲ့ တခြား kubernetes resources တွေကို json သို့မဟုတ် YAML manifest တွေနဲ့ Kubernetes REST API endpoint သို့ post လုပ်ပြီး ဖန်တီးလို့ရနိုင်ပါတယ်။ နောက်တခြား နည်းလမ်းတစ်ခုကတော့ ရိုးရှင်းတဲ့ kubectl run command နဲ့ create လုပ်လို့ရနိုင်ပါတယ်။ kubectl command က အတော်အများ အသုံးဝင် ပေမယ့် တချို့ properties တွေကိုတော့ လုပ်လို့မရပါဘူး၊ limitation တွေ ရှိပါတယ် သို့သော်များလဲ cluster administrator တစ်ယောက် အနေနဲ့ နေ့စဉ် အမြဲ ထိတွေ့နေရတဲ့ အရေးပါတဲ့ နေရာမှာ ရှိပါတယ်။ pod manifest မှာ ဘာတွေ ပါဝင်နိုင်သလဲ ? Pod ရဲ့ အဓိက manifest ကတော့ အပိုင်း ၄ခု ပါဝင်ပါတယ်။ manifest တိုင်းမှာ ပထမဦးစွာ မပါမဖြစ်ပါဝင်တာကတော့ K8s ရဲ့ API version တွေပါ။ API version ဆိုတာ ကတော့ k8s မှာ pod သို့မဟုတ် တခြားသော resource တွေ ကို ဖန်းတီးတဲ့ အခါ မတူညီတဲ့ versions (stable/ Beta/ Alpha) တွေရဲ့ feature တွေကို ကိုယ်ဘာတွေ သုံးချင်လဲ အပေါ်မှာ မူတည်ပြီ ထည့်လို့ရနိုင်ပါတယ်။ ယေဘုယျ အားဖြင့်တော့ ကျွန်တော်တို့တွေ က stable တွေကို သုံးကြပါတယ်၊ stable ကတော့ vX (eg. v1) ဖြစ်ပြီး X ကတော့ အဲနေရာမှာ 1, 2 အစရှိသဖြင့် integer တွေ ဖြစ်ပါတယ်။ ခုနက ပြောသလိုဘဲ API version တစ်ခုနဲ့ တစ်ခုမှာ လုပ်လို့ရတာတွေ၊ လုပ်လို့မရတာတွေ၊ ပိုကောင်းမွန်တဲ့ feature တွေ၊ stable မှာ မရှိတော့တဲ့ deprecate feature တွေ၊ support လုပ်တဲ့ feature တွေ အစရှိသဖြင့် ကွဲပြားခြားနား ပါတယ်။ အသေးစိတ် ကိုတော့ kubernetes ရဲ့ <a href="https://kubernetes.io/docs/concepts/overview/kubernetes-api/">document</a> မှာ ကြည့်နိုင်ပါတယ်။ တခြား ပါဝင်တာတွေကတော့ -</p>
<ul>
<li><strong>apiVersion</strong> - ကိုယ္အသုံးျပဳမဲ့ resource ရဲ႕ API version (ေနာက္ပိုင္းတြင္ အေသးစိပ္ ရွင္းျပမည္) အလြတ္သိရမလို၊ doc တြင္ (သို႔) kubectl explain pod ျဖင့္ သိနုိင္သည္။</li>
<li><strong>kind</strong> - ကိုယ္တည္ေဆာက္မည့္ resource အမ်ိဳးအစား၊ ယခု အခါ တြင္ pod resource ျဖစ္သည္။</li>
<li><strong>Metadata</strong> - မှာတော့ pod ရဲ့ name, namespace, labels , annotations စတဲ့ တခြား information တွေပါဝင်ပါတယ်။</li>
<li><strong>Spec</strong> - မှာတော့ တကယ် pod မှာပါဝင်တဲ့ ဖေါ်ပြချက်တွေ ပါဝင်ပါတယ်။ အဲဒါ တွေကတော့ ဘယ် containers တွေ၊ volumes တွေ၊ environment တွေနဲ့ configmap တွေ၊ အစရှိတဲ့ data တွေ ကို ဘယ်လို အသုံးပြုမယ်ဆိုတာတွေ ပါဝင်ပါတယ်။</li>
<li><strong>Status</strong> - ဒီထဲမှာတော့ လက်ရှိ pod ရဲ့ container တစ်ခုချင်းစီရဲ့ internal IP၊ running ဖြစ်နေလား မဖြစ်နေလား၊ စတဲ့ basic ကျတဲ့ informationတွေ၊ အခြေအနေတွေကို ဖေါ်ပြပေးတဲ့ information တွေ ပါဝင်ပါတယ်။</li>
</ul>
<p>ဒါတွေကတော့ pod manifest(definition လို့လည်း ခေါ်တယ်၊ descriptor လို့လည်း ခေါ်တယ်) ရဲ့ အဓိက ပါဝင်တဲ့ အပိုင်း ၄ ပိုင်း ဖြစ်ပါတယ်။ pod ဖန်တီးတဲ့ အခါမှာတော့ နောက်ဆုံးက status ဆိုတဲ့ အပိုင်းကို ထည့်ရေးစရာ မလိုပါဘူး။ status ကတော့ လက်ရှိ cluster ထဲမှာ တည်ဆောက်ထားတဲ့ pod ကို retrieve လုပ်လိုက်တဲ့ အခါမှာ cluster ဘက် အခြမ်းမှ ထုတ်ပြပေးတဲ့ information တွေသာ ဖြစ်ပါတယ်။ တချို့ အခြေနေ တွေမှာ information တွေ သိရဖို့ အသုံးဝင်ပါတယ်။ pod တခုကို ဖန်တီးသည့် အခါ Metadata, Spec တို့ရဲ့ field တွေကို သိရှိနိင်ဖို့ k8s API document တဆင့် သို့မဟုတ် kubectl explain command နဲ့ ဖြစ်နိုင်ခြေရှိတဲ့ API object fields တွေကို လဲ ရှာဖွေလို့ရနိုင်ပါတယ်၊ လွန်စွာ အသုံးဝင်ပါတယ်။</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># A basic pod manifest:</span>
apiVersion: v1
kind: Pod
metadata:
  name: hola
spec:
  containers:
  - image: quay.io/dther/hola
    name: hola
    ports:
    - containerPort: <span style="color:#ae81ff">8080</span>
      protocol: TCP
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Pod create using kubectl and without yaml manifest</span>
$ kubectl run hola --image<span style="color:#f92672">=</span>quay.io/dther/hola --port<span style="color:#f92672">=</span><span style="color:#ae81ff">8080</span> --generator<span style="color:#f92672">=</span>run-pod/v1
pod/hola created

<span style="color:#75715e"># retrieve Pod Object</span>
$ kubectl get pod
NAME                                  READY   STATUS    RESTARTS   AGE
hola                                  1/1     Running   <span style="color:#ae81ff">0</span>          5s
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># retrieve Pod Object detail by name describe with yaml. you can use json also.</span>
$ kubect get pod hola -o yaml
apiVersion: v1
kind: Pod
metadata:
  creationTimestamp: <span style="color:#e6db74">&#34;2019-11-22T04:20:16Z&#34;</span>
  labels:
    run: hola
  name: hola
  namespace: default
  resourceVersion: <span style="color:#e6db74">&#34;23778097&#34;</span>
  selfLink: /api/v1/namespaces/default/pods/hola
  uid: 93fc57ec<span style="color:#ae81ff">-4198</span><span style="color:#ae81ff">-4134</span>-8a9e-37901871ea30
spec:
  containers:
  - image: quay.io/dther/hola
    imagePullPolicy: Always
    name: hola
    ports:
    - containerPort: <span style="color:#ae81ff">8080</span>
      protocol: TCP
    resources: {}
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
    volumeMounts:
    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
      name: default-token-gll68
      readOnly: <span style="color:#66d9ef">true</span>
  dnsPolicy: ClusterFirst
  enableServiceLinks: <span style="color:#66d9ef">true</span>
  nodeName: node2
  priority: <span style="color:#ae81ff">0</span>
  restartPolicy: Always
  schedulerName: default-scheduler
  securityContext: {}
  serviceAccount: default
  serviceAccountName: default
  terminationGracePeriodSeconds: <span style="color:#ae81ff">30</span>
  tolerations:
  - effect: NoExecute
    key: node.kubernetes.io/not-ready
    operator: Exists
    tolerationSeconds: <span style="color:#ae81ff">300</span>
  - effect: NoExecute
    key: node.kubernetes.io/unreachable
    operator: Exists
    tolerationSeconds: <span style="color:#ae81ff">300</span>
  volumes:
  - name: default-token-gll68
    secret:
      defaultMode: <span style="color:#ae81ff">420</span>
      secretName: default-token-gll68
status:
  conditions:
  - lastProbeTime: <span style="color:#66d9ef">null</span>
    lastTransitionTime: <span style="color:#e6db74">&#34;2019-11-22T04:20:34Z&#34;</span>
    status: <span style="color:#e6db74">&#34;True&#34;</span>
    type: Initialized
  - lastProbeTime: <span style="color:#66d9ef">null</span>
    lastTransitionTime: <span style="color:#e6db74">&#34;2019-11-22T04:20:43Z&#34;</span>
    status: <span style="color:#e6db74">&#34;True&#34;</span>
    type: Ready
  - lastProbeTime: <span style="color:#66d9ef">null</span>
    lastTransitionTime: <span style="color:#e6db74">&#34;2019-11-22T04:20:43Z&#34;</span>
    status: <span style="color:#e6db74">&#34;True&#34;</span>
    type: ContainersReady
  - lastProbeTime: <span style="color:#66d9ef">null</span>
    lastTransitionTime: <span style="color:#e6db74">&#34;2019-11-22T04:20:16Z&#34;</span>
    status: <span style="color:#e6db74">&#34;True&#34;</span>
    type: PodScheduled
  containerStatuses:
  - containerID: containerd://4caa1c5d607621a52bd392068c4386880eb2844070c3476e6e2cf6c90a16ce7d
    image: quay.io/dther/hola:latest
    imageID: sha256:b9d148f1a7ff4f1841bbc5a7ac848714eed3310b29643e10a104820a6a21bc94
    lastState: {}
    name: hola
    ready: <span style="color:#66d9ef">true</span>
    restartCount: <span style="color:#ae81ff">0</span>
    state:
      running:
        startedAt: <span style="color:#e6db74">&#34;2019-11-22T04:20:43Z&#34;</span>
  hostIP: <span style="color:#ae81ff">10.14</span><span style="color:#ae81ff">.255</span><span style="color:#ae81ff">.11</span>
  phase: Running
  podIP: <span style="color:#ae81ff">10.233</span><span style="color:#ae81ff">.96</span><span style="color:#ae81ff">.7</span>
  qosClass: BestEffort
  startTime: <span style="color:#e6db74">&#34;2019-11-22T04:20:34Z&#34;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># Explain Pod resource using kubectl explain</span>
$ kubectl explain pod
KIND:     Pod
VERSION:  v1

DESCRIPTION:
     Pod is a collection of containers that can run on a host. This resource is
     created by clients and scheduled onto hosts.

FIELDS:
   apiVersion	&lt;string<span style="color:#e6db74">&gt;
</span><span style="color:#e6db74">    </span><span style="color:#e6db74"> </span><span style="color:#e6db74">APIVersion defines the versioned schema of this representation of an</span>
     object. Servers should convert recognized schemas to the latest internal
     value, and may reject unrecognized values. More info:
     https://git.k8s.io/community/contributors/devel/api-conventions.md<span style="color:#75715e">#resources</span>

   kind	&lt;string<span style="color:#e6db74">&gt;
</span><span style="color:#e6db74">    </span><span style="color:#e6db74"> </span><span style="color:#e6db74">Kind is a string value representing the REST resource this object</span>
     represents. Servers may infer this from the endpoint the client submits
     requests to. Cannot be updated. In CamelCase. More info:
     https://git.k8s.io/community/contributors/devel/api-conventions.md<span style="color:#75715e">#types-kinds</span>

   metadata	&lt;Object<span style="color:#e6db74">&gt;
</span><span style="color:#e6db74">    </span><span style="color:#e6db74"> </span><span style="color:#e6db74">Standard object&#39;s metadata. More info:</span>
     https://git.k8s.io/community/contributors/devel/api-conventions.md<span style="color:#75715e">#metadata</span>

   spec	&lt;Object<span style="color:#e6db74">&gt;
</span><span style="color:#e6db74">    </span><span style="color:#e6db74"> </span><span style="color:#e6db74">Specification of the desired behavior of the pod. More info:</span>
     https://git.k8s.io/community/contributors/devel/api-conventions.md<span style="color:#75715e">#spec-and-status</span>

   status	&lt;Object<span style="color:#e6db74">&gt;
</span><span style="color:#e6db74">    </span><span style="color:#e6db74"> </span><span style="color:#e6db74">Most recently observed status of the pod. This data may not be up to date.</span>
     Populated by the system. Read-only. More info:
     https://git.k8s.io/community/contributors/devel/api-conventions.md<span style="color:#75715e">#spec-and-status</span>

$ kubectl explain pod.spec <span style="color:#75715e">#### detail    အသုံးပြုနိုင်တဲ့ spec တွေကို တွေ့ရပါမယ်</span>
</code></pre></div><pre><code>Reference:
- https://kubernetes.io/docs/reference/
- https://kubernetes.io/docs/concepts/overview/kubernetes-api/
- https://kubernetes.io/docs/reference/kubectl/conventions/ 
</code></pre>
    </section>


  <footer class="post-footer">


    

    <section class="author">

  <p></p>
  

</section>


    

    

  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Myanmar Kubernetes User Group</a> All rights reserved - 2019</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="https://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/syui/hugo-theme-air">hugo-theme-air</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="https://mm-k8s-ug.github.io/js/jquery.js"></script>
    <script type="text/javascript" src="https://mm-k8s-ug.github.io/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://mm-k8s-ug.github.io/js/index.js"></script>
    <script src="https://mm-k8s-ug.github.io/js/particles.min.js"></script>
    <script src="https://mm-k8s-ug.github.io/js/particles.js"></script>  

</body>
</html>

